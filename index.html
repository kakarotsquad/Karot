<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>$KAKAROT – Unleash the Saiyan Spirit</title>

  <link href="https://fonts.googleapis.com/css2?family=Rubik:wght@600;800&display=swap" rel="stylesheet">

  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    html, body {
      height: 100%;
      font-family: 'Rubik', sans-serif;
      background-color: #000;
      color: white;
      overflow-x: hidden;
    }

    #loading-screen {
      position: fixed;
      top: 0; left: 0;
      width: 100%;
      height: 100%;
      background: black;
      color: #facc15;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.5rem;
      z-index: 9999;
      animation: fadeOut 2s forwards;
      animation-delay: 2s;
    }

    @keyframes fadeOut {
      to {
        opacity: 0;
        visibility: hidden;
      }
    }

    .super-saiyan {
      background-color: #222;
      color: #ffed4d;
      transition: all 0.5s ease;
    }

    .super-saiyan .btn {
      background-color: #facc15 !important;
      color: black;
      box-shadow: 0 0 12px #facc15;
    }

    .super-saiyan .section {
      box-shadow: 0 0 25px #facc15aa;
    }

    .super-saiyan h1, .super-saiyan h2 {
      color: #ffe600;
    }

    .marquee-container {
      width: 100%;
      overflow: hidden;
      white-space: nowrap;
      background: #00ff88;
      color: #000;
      font-size: 0.65rem;
      padding: 0.5rem 0;
      box-shadow: 0 0 10px #00ff88;
      z-index: 1000;
      position: relative;
      font-weight: bold;
    }

    .marquee-text {
      display: inline-block;
      animation: scrollText 12s linear infinite;
      padding-left: 100%;
    }

    @keyframes scrollText {
      0%   { transform: translateX(0); }
      100% { transform: translateX(-100%); }
    }

    main {
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 2rem 1rem 4rem;
      text-align: center;
      max-width: 1000px;
      margin: 0 auto;
    }

    .hero {
      width: 100%;
      max-width: 600px;
      border-radius: 20px;
      box-shadow: 0 0 30px #00ff88;
      margin-bottom: 1.5rem;
    }

    h1 {
      color: #facc15;
      font-size: 2rem;
      margin-bottom: 1.5rem;
      font-weight: 800;
    }

    p {
      font-size: 0.85rem;
      line-height: 1.6;
      margin-bottom: 1.5rem;
    }

    .btn {
      background-color: #8a2be2;
      color: #fff;
      padding: 1rem 1.5rem;
      border-radius: 10px;
      font-size: 0.7rem;
      margin: 0.5rem;
      display: inline-block;
      text-decoration: none;
      font-weight: bold;
      transition: transform 0.2s ease, background 0.2s ease;
      box-shadow: 0 0 12px #8a2be2;
    }

    .btn:hover {
      transform: scale(1.08);
      background-color: #9b30ff;
    }

    .section {
      margin-top: 2.5rem;
      padding: 1.5rem;
      width: 90%;
      background: rgba(255,255,255,0.05);
      border-radius: 14px;
      box-shadow: 0 0 20px #8a2be2aa;
    }

    .section h2 {
      color: #facc15;
      font-size: 1.1rem;
      margin-bottom: 1rem;
    }

    .section p, .section ul {
      font-size: 0.7rem;
    }

    .history-box {
      max-height: 200px;
      overflow-y: auto;
      padding-right: 10px;
      text-align: left;
    }

    .scroll-box {
      max-height: 160px;
      overflow-y: auto;
      text-align: left;
      padding-right: 10px;
    }

    ul {
      list-style: none;
      padding-left: 0;
    }

    li::before {
      content: "🔥 ";
    }

    .socials {
      margin-top: 2rem;
      display: flex;
      gap: 20px;
      justify-content: center;
      flex-wrap: wrap;
    }

    .socials img {
      width: 36px;
      height: 36px;
      background: #facc15;
      padding: 6px;
      border-radius: 6px;
      transition: transform 0.2s ease;
      filter: drop-shadow(0 0 6px #facc15);
    }

    .socials img:hover {
      transform: scale(1.2);
    }

    .partners {
      margin-top: 3rem;
    }

    footer {
      text-align: center;
      font-size: 0.55rem;
      color: #888;
      padding: 1.5rem 1rem 2rem;
    }

    /* Game Styles */
    #game-container {
      margin-top: 3rem;
      width: 90%;
      max-width: 600px;
      background: rgba(255,255,255,0.07);
      border-radius: 14px;
      padding: 1.5rem;
      box-shadow: 0 0 20px #facc15aa;
      color: #facc15;
      user-select: none;
    }

    #game-container h2 {
      margin-bottom: 1rem;
      font-weight: 700;
      color: #facc15;
    }

    #game-container button {
      background-color: #facc15;
      color: black;
      border: none;
      padding: 0.75rem 1.25rem;
      margin: 0.5rem;
      border-radius: 8px;
      font-weight: 700;
      cursor: pointer;
      box-shadow: 0 0 12px #facc15;
      transition: transform 0.15s ease;
    }
    #game-container button:disabled {
      background-color: #999;
      cursor: not-allowed;
      box-shadow: none;
    }
    #game-container button:hover:not(:disabled) {
      transform: scale(1.1);
    }

    #score-display, #time-display {
      font-size: 1.25rem;
      margin: 0.5rem 0 1rem;
      font-weight: 800;
      color: #fff200;
    }

    #reward-status {
      margin-top: 1rem;
      font-weight: 700;
      min-height: 1.2rem;
    }

    #leaderboard {
      margin-top: 2rem;
      text-align: left;
      max-height: 200px;
      overflow-y: auto;
      background: rgba(250, 250, 250, 0.05);
      border-radius: 10px;
      padding: 1rem;
      color: #00ff88;
      font-weight: 700;
      font-size: 0.85rem;
    }

    #leaderboard h3 {
      margin-bottom: 0.75rem;
      color: #facc15;
    }

    #leaderboard ol {
      padding-left: 1.2rem;
    }

    #leaderboard li {
      margin-bottom: 0.4rem;
    }
  </style>
</head>
<body>
  <div id="loading-screen">⚡ Powering up...</div>

  <div class="marquee-container">
    <div class="marquee-text">$KAKAROT $KAKAROT $KAKAROT $KAKAROT $KAKAROT $KAKAROT</div>
  </div>

  <main>
    <img src="be70ec86fc53e267f668fc1815f6e1fe.jpg" alt="$KAKAROT Hero" class="hero">
    <h1>$KAKAROT</h1>
    <p>🔥 The Legend of the Saiyan Begins!<br>Join the Kakarot Clan. Become a meme warrior in the crypto universe.</p>

    <a href="https://t.me/kamecoinsquad" class="btn" target="_blank">Join Telegram</a>
    <button onclick="playSound()" class="btn">💥 Power Up!</button>
    <button onclick="toggleSaiyan()" class="btn">⚡ Super Saiyan Mode</button>

    <audio id="dbzSound">
      <source src="over9000.mp3" type="audio/mpeg">
    </audio>

    <div class="section">
      <h2>📖 Why We Created $KAKAROT</h2>
      <div class="history-box">
        <p>We created $KAKAROT not just as a meme — but as a tribute to the energy, imagination, and childhood nostalgia that Dragon Ball gave us.<br><br>
        When we were young, we’d rush home after school, eyes wide, hearts pounding, waiting for Goku to charge up the next big Kamehameha. That feeling of limitless power, of overcoming the impossible — that's what we want to bring back.<br><br>
        Now as adults in crypto, we channel that same energy into $KAKAROT. This isn’t just a token. It’s a power level. A dojo for believers. A meme with meaning.<br><br>
        Because once a Saiyan, always a Saiyan.</p>
      </div>
    </div>

    <div class="section">
      <h2>📊 Tokenomics</h2>
      <ul>
        <li>Total Supply: Over 9000... Trillion!</li>
        <li>100% Community Owned (like the spirit bomb — everyone contributes)</li>
        <li>LP Burned harder than Vegeta's pride</li>
        <li>Contract Renounced — no one’s in control, not even Frieza</li>
      </ul>
    </div>

    <div class="section">
      <h2>🗺️ Roadmap</h2>
      <div class="scroll-box">
        <ul>
          <li>✅ Launch $KAKAROT with a Kamehameha</li>
          <li>✅ Form the Saiyan Squad on Telegram & Twitter</li>
          <li>🔜 Listing on DEXTools & CoinGecko (we're flying there on Nimbus)</li>
          <li>🔜 Meme War Tournament: May the best shitpost win</li>
          <li>🔜 NFT Drop – Each one blessed by King Kai</li>
          <li>🔜 Saiyan Staking Dojo (Train. Earn. Ascend.)</li>
          <li>🔜 $KAKAROT Power Level Tracker (Spoiler: It's over 9000)</li>
          <li>🔜 Global $KAKAROT Meetup (cosplay 100% encouraged)</li>
          <li>🔜 Fusion Partnerships – stronger together</li>
        </ul>
      </div>
    </div>

    <div class="socials">
      <a href="https://t.me/kamecoinsquad" target="_blank">
        <img src="https://cdn-icons-png.flaticon.com/512/2111/2111646.png" alt="Telegram">
      </a>
      <a href="https://x.com/kamecoinsquad" target="_blank">
        <img src="https://cdn-icons-png.flaticon.com/512/733/733635.png" alt="Twitter">
      </a>
    </div>

    <div class="partners">
      <p style="font-size: 0.75rem; color: #444;">
        Token info and branding provided by Kame Coin Squad<br>
        &copy; 2024 $KAKAROT All rights reserved.
      </p>
    </div>

    <!-- CLICK BATTLE GAME -->
    <div id="game-container">
      <h2>⚡ $KAKAROT Click Battle Game</h2>

      <button id="connectWalletBtn">Connect Wallet</button>
      <p id="walletAddress" style="margin: 0.5rem 0; font-size: 0.8rem;"></p>

      <p id="time-display">Time Left: 10</p>
      <p id="score-display">Score: 0</p>

      <button id="startGameBtn">Start Game</button>
      <button id="clickBtn" disabled>Power Up! 💥</button>

      <p id="reward-status"></p>

      <div id="leaderboard">
        <h3>Leaderboard</h3>
        <ol id="leaderboard-list"></ol>
      </div>
    </div>

  </main>

  <footer>
    Made with 💛 by $KAKAROT Team | Keep your power level over 9000!
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.umd.min.js"></script>
  <script>
    // Loading screen fadeout
    window.onload = () => {
      setTimeout(() => {
        const loadingScreen = document.getElementById('loading-screen');
        loadingScreen.style.opacity = '0';
        setTimeout(() => loadingScreen.style.display = 'none', 2000);
      }, 2000);
    };

    // Audio & Saiyan toggle functions
    function playSound() {
      const audio = document.getElementById('dbzSound');
      audio.currentTime = 0;
      audio.play();
    }

    function toggleSaiyan() {
      document.body.classList.toggle('super-saiyan');
    }

    // --- CLICK BATTLE GAME LOGIC ---

    const connectWalletBtn = document.getElementById('connectWalletBtn');
    const walletAddressDisplay = document.getElementById('walletAddress');
    const startGameBtn = document.getElementById('startGameBtn');
    const clickBtn = document.getElementById('clickBtn');
    const timeDisplay = document.getElementById('time-display');
    const scoreDisplay = document.getElementById('score-display');
    const rewardStatus = document.getElementById('reward-status');
    const leaderboardList = document.getElementById('leaderboard-list');

    let provider, signer, tokenContract;
    let gameActive = false;
    let timeLeft = 10;
    let score = 0;
    let timerInterval = null;
    let userAddress = null;

    const tokenContractAddress = "YOUR_TOKEN_CONTRACT_ADDRESS"; // Replace with your token address
    const tokenABI = [
      "function transfer(address to, uint amount) public returns (bool)",
      "function decimals() public view returns (uint8)"
    ];

    async function connectWallet() {
      if (window.ethereum) {
        try {
          await window.ethereum.request({ method: 'eth_requestAccounts' });
          provider = new ethers.providers.Web3Provider(window.ethereum);
          signer = provider.getSigner();
          userAddress = await signer.getAddress();
          walletAddressDisplay.textContent = `Wallet: ${userAddress}`;
          connectWalletBtn.disabled = true;
          connectWalletBtn.textContent = "Wallet Connected";

          // Initialize token contract (if needed)
          tokenContract = new ethers.Contract(tokenContractAddress, tokenABI, signer);

        } catch (error) {
          alert("Wallet connection failed: " + error.message);
        }
      } else {
        alert("Please install MetaMask!");
      }
    }

    function updateLeaderboard() {
      // Load leaderboard from localStorage
      let leaderboard = JSON.parse(localStorage.getItem('kakarot_leaderboard')) || [];

      // Sort descending by score
      leaderboard.sort((a,b) => b.score - a.score);

      // Show top 10
      leaderboardList.innerHTML = "";
      leaderboard.slice(0,10).forEach((entry, idx) => {
        const li = document.createElement('li');
        li.textContent = `${entry.address.substring(0,6)}...${entry.address.slice(-4)} - ${entry.score} clicks`;
        leaderboardList.appendChild(li);
      });
    }

    function saveScore(address, score) {
      let leaderboard = JSON.parse(localStorage.getItem('kakarot_leaderboard')) || [];
      leaderboard.push({ address, score });
      localStorage.setItem('kakarot_leaderboard', JSON.stringify(leaderboard));
      updateLeaderboard();
    }

    function startGame() {
      if (!userAddress) {
        alert("Please connect your wallet first!");
        return;
      }
      if (gameActive) return;

      gameActive = true;
      timeLeft = 10;
      score = 0;
      timeDisplay.textContent = `Time Left: ${timeLeft}`;
      scoreDisplay.textContent = `Score: ${score}`;
      rewardStatus.textContent = "";
      startGameBtn.disabled = true;
      clickBtn.disabled = false;

      timerInterval = setInterval(() => {
        timeLeft--;
        timeDisplay.textContent = `Time Left: ${timeLeft}`;
        if (timeLeft <= 0) {
          endGame();
        }
      }, 1000);
    }

    function incrementScore() {
      if (!gameActive) return;
      score++;
      scoreDisplay.textContent = `Score: ${score}`;
    }

    async function endGame() {
      gameActive = false;
      clearInterval(timerInterval);
      startGameBtn.disabled = false;
      clickBtn.disabled = true;

      rewardStatus.textContent = "Calculating rewards...";

      // Calculate tokens: 1 token per 10 clicks
      let tokensEarned = Math.floor(score / 10);
      if (tokensEarned <= 0) {
        rewardStatus.textContent = "Not enough clicks to earn $KAKAROT tokens. Try again!";
        saveScore(userAddress, score);
        return;
      }

      // Try to send tokens (demo assumes signer has tokens - usually reward should come from treasury)
      try {
        const decimals = await tokenContract.decimals();
        const amount = ethers.utils.parseUnits(tokensEarned.toString(), decimals);

        rewardStatus.textContent = "Sending $KAKAROT tokens...";

        // This sends tokens from your connected wallet to the user (which is self), demo only
        const tx = await tokenContract.transfer(userAddress, amount);
        await tx.wait();

        rewardStatus.textContent = `Congrats! You earned ${tokensEarned} $KAKAROT tokens!`;

      } catch (error) {
        rewardStatus.textContent = "Failed to send tokens: " + error.message;
      }

      saveScore(userAddress, score);
    }

    connectWalletBtn.addEventListener('click', connectWallet);
    startGameBtn.addEventListener('click', startGame);
    clickBtn.addEventListener('click', incrementScore);

    // Initialize leaderboard on page load
    updateLeaderboard();

  </script>
</body>
</html>
