<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>$KAKAROT ‚Äì Unleash the Saiyan Spirit</title>
  <link href="https://fonts.googleapis.com/css2?family=Rubik:wght@600;800&display=swap" rel="stylesheet" />
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    html, body {
      height: 100%;
      font-family: 'Rubik', sans-serif;
      background-color: #000;
      color: white;
      overflow-x: hidden;
    }
    #loading-screen {
      position: fixed;
      top: 0; left: 0;
      width: 100%;
      height: 100%;
      background: black;
      color: #facc15;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.5rem;
      z-index: 9999;
      animation: fadeOut 2s forwards;
      animation-delay: 2s;
    }
    @keyframes fadeOut {
      to {
        opacity: 0;
        visibility: hidden;
      }
    }
    .super-saiyan {
      background-color: #222;
      color: #ffed4d;
      transition: all 0.5s ease;
    }
    .super-saiyan .btn {
      background-color: #facc15 !important;
      color: black;
      box-shadow: 0 0 12px #facc15;
    }
    .super-saiyan .section {
      box-shadow: 0 0 25px #facc15aa;
    }
    .super-saiyan h1, .super-saiyan h2 {
      color: #ffe600;
    }
    .marquee-container {
      width: 100%;
      overflow: hidden;
      white-space: nowrap;
      background: #00ff88;
      color: #000;
      font-size: 0.65rem;
      padding: 0.5rem 0;
      box-shadow: 0 0 10px #00ff88;
      z-index: 1000;
      position: relative;
      font-weight: bold;
    }
    .marquee-text {
      display: inline-block;
      animation: scrollText 12s linear infinite;
      padding-left: 100%;
    }
    @keyframes scrollText {
      0%   { transform: translateX(0); }
      100% { transform: translateX(-100%); }
    }
    main {
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 2rem 1rem 4rem;
      text-align: center;
      max-width: 1000px;
      margin: 0 auto;
    }
    .hero {
      width: 100%;
      max-width: 600px;
      border-radius: 20px;
      box-shadow: 0 0 30px #00ff88;
      margin-bottom: 1.5rem;
    }
    h1 {
      color: #facc15;
      font-size: 2rem;
      margin-bottom: 1.5rem;
      font-weight: 800;
    }
    p {
      font-size: 0.85rem;
      line-height: 1.6;
      margin-bottom: 1.5rem;
    }
    .btn {
      background-color: #8a2be2;
      color: #fff;
      padding: 1rem 1.5rem;
      border-radius: 10px;
      font-size: 0.7rem;
      margin: 0.5rem;
      display: inline-block;
      text-decoration: none;
      font-weight: bold;
      transition: transform 0.2s ease, background 0.2s ease;
      box-shadow: 0 0 12px #8a2be2;
      cursor: pointer;
      user-select: none;
    }
    .btn:hover {
      transform: scale(1.08);
      background-color: #9b30ff;
    }
    .section {
      margin-top: 2.5rem;
      padding: 1.5rem;
      width: 90%;
      background: rgba(255,255,255,0.05);
      border-radius: 14px;
      box-shadow: 0 0 20px #8a2be2aa;
    }
    .section h2 {
      color: #facc15;
      font-size: 1.1rem;
      margin-bottom: 1rem;
    }
    .section p, .section ul {
      font-size: 0.7rem;
    }
    .history-box {
      max-height: 200px;
      overflow-y: auto;
      padding-right: 10px;
      text-align: left;
    }
    .scroll-box {
      max-height: 160px;
      overflow-y: auto;
      text-align: left;
      padding-right: 10px;
    }
    ul {
      list-style: none;
      padding-left: 0;
    }
    li::before {
      content: "üî• ";
    }
    .socials {
      margin-top: 2rem;
      display: flex;
      gap: 20px;
      justify-content: center;
      flex-wrap: wrap;
    }
    .socials img {
      width: 36px;
      height: 36px;
      background: #facc15;
      padding: 6px;
      border-radius: 6px;
      transition: transform 0.2s ease;
      filter: drop-shadow(0 0 6px #facc15);
    }
    .socials img:hover {
      transform: scale(1.2);
    }
    .partners {
      margin-top: 3rem;
    }
    footer {
      text-align: center;
      font-size: 0.55rem;
      color: #888;
      padding: 1.5rem 1rem 2rem;
    }

    /* Adicional para jogo */
    #click-game ol {
      list-style: decimal;
      padding-left: 1rem;
    }
    #claim-status {
      margin-top: 0.5rem;
      font-size: 0.85rem;
      font-weight: bold;
    }
  </style>
</head>
<body>
  <div id="loading-screen">‚ö° Powering up...</div>
  <div class="marquee-container">
    <div class="marquee-text">$KAKAROT $KAKAROT $KAKAROT $KAKAROT $KAKAROT $KAKAROT</div>
  </div>
  <main>
    <img src="be70ec86fc53e267f668fc1815f6e1fe.jpg" alt="$KAKAROT Hero" class="hero" />
    <h1>$KAKAROT</h1>
    <p>üî• The Legend of the Saiyan Begins!<br />Join the Kakarot Clan. Become a meme warrior in the crypto universe.</p>
    <a href="https://t.me/kamecoinsquad" class="btn" target="_blank">Join Telegram</a>
    <button onclick="playSound()" class="btn">üí• Power Up!</button>
    <button onclick="toggleSaiyan()" class="btn">‚ö° Super Saiyan Mode</button>
    <audio id="dbzSound">
      <source src="over9000.mp3" type="audio/mpeg" />
    </audio>

    <div class="section">
      <h2>üìñ Why We Created $KAKAROT</h2>
      <div class="history-box">
        <p>
          We created $KAKAROT not just as a meme ‚Äî but as a tribute to the energy, imagination, and childhood nostalgia that Dragon Ball gave
          us.<br /><br />
          When we were young, we‚Äôd rush home after school, eyes wide, hearts pounding, waiting for Goku to charge up the next big Kamehameha.
          That feeling of limitless power, of overcoming the impossible ‚Äî that's what we want to bring back.<br /><br />
          Now as adults in crypto, we channel that same energy into $KAKAROT. This isn‚Äôt just a token. It‚Äôs a power level. A dojo for believers.
          A meme with meaning.<br /><br />
          Because once a Saiyan, always a Saiyan.
        </p>
      </div>
    </div>

    <div class="section">
      <h2>üìä Tokenomics</h2>
      <ul>
        <li>Total Supply: Over 9000... Trillion!</li>
        <li>100% Community Owned (like the spirit bomb ‚Äî everyone contributes)</li>
        <li>LP Burned harder than Vegeta's pride</li>
        <li>Contract Renounced ‚Äî no one‚Äôs in control, not even Frieza</li>
      </ul>
    </div>

    <div class="section">
      <h2>üó∫Ô∏è Roadmap</h2>
      <div class="scroll-box">
        <ul>
          <li>‚úÖ Launch $KAKAROT with a Kamehameha</li>
          <li>‚úÖ Form the Saiyan Squad on Telegram & Twitter</li>
          <li>üîú Listing on DEXTools & CoinGecko (we're flying there on Nimbus)</li>
          <li>üîú Meme War Tournament: May the best shitpost win</li>
          <li>üîú NFT Drop ‚Äì Each one blessed by King Kai</li>
          <li>üîú Saiyan Staking Dojo (Train. Earn. Ascend.)</li>
          <li>üîú $KAKAROT Power Level Tracker (Spoiler: It's over 9000)</li>
          <li>üîú Global $KAKAROT Meetup (cosplay 100% encouraged)</li>
          <li>üîú Fusion Partnerships ‚Äì stronger together</li>
        </ul>
      </div>
    </div>

    <!-- IN√çCIO DO JOGO DE CLIQUES -->
    <div class="section" id="click-game">
      <h2>üéÆ Jogo de Cliques R√°pidos</h2>
      <p>Clique o m√°ximo que puder em 54 segundos!</p>

      <!-- Bot√£o conectar carteira -->
      <button id="connect-wallet-btn" class="btn">Conectar Carteira MetaMask</button>
      <p id="wallet-address" style="margin-top:0.5rem; font-size:0.8rem; color:#00ff88;"></p>

      <button id="start-game-btn" class="btn" style="display:none; margin-top:1rem;">Come√ßar Jogo</button>

      <div id="game-info" style="margin-top: 1rem; font-size: 0.8rem; color: #00ff88;"></div>

      <button id="click-btn" class="btn" style="display:none; margin-top:1rem;">Clique Aqui!</button>

      <p id="final-score" style="margin-top:1rem; font-weight:bold;"></p>

      <!-- Claim token bot√£o -->
      <button id="claim-btn" class="btn" style="display:none; margin-top:1rem;">Reivindicar Tokens</button>
      <p id="claim-status"></p>

      <h3 style="margin-top:2rem;">üèÜ Ranking Semanal (Local)</h3>
      <ol id="leaderboard" style="text-align:left; max-width:300px; margin: 0 auto 1rem;"></ol>
    </div>

    <div class="socials">
      <a href="https://t.me/kamecoinsquad" target="_blank">
        <img src="https://cdn-icons-png.flaticon.com/512/2111/2111646.png" alt="Telegram" />
      </a>
      <a href="https://x.com/kamecoinbnb" target="_blank">
        <img src="https://cdn-icons-png.flaticon.com/512/733/733579.png" alt="Twitter" />
      </a>
    </div>

    <div class="partners">
      <p style="font-size: 0.55rem; color: #888;">
        2023 $KAKAROT &copy; All rights reserved.<br />
        Developed by <a href="https://github.com/kakarot" target="_blank" style="color:#00ff88;">KakarotDev</a>
      </p>
    </div>
  </main>

  <footer>
    The power level is rising... Stay tuned!
  </footer>

  <script>
    // LOADING SCREEN
    window.addEventListener("load", () => {
      const loader = document.getElementById("loading-screen");
      setTimeout(() => {
        loader.style.display = "none";
      }, 2200);
    });

    // SOUND
    function playSound() {
      const sound = document.getElementById("dbzSound");
      if(sound) {
        sound.currentTime = 0;
        sound.play();
      }
    }

    // SUPER SAIYAN TOGGLE
    function toggleSaiyan() {
      document.body.classList.toggle("super-saiyan");
    }

    // ================== META MASK INTEGRA√á√ÉO E JOGO ===================

    let userAccount = null;

    const connectWalletBtn = document.getElementById("connect-wallet-btn");
    const walletAddressEl = document.getElementById("wallet-address");
    const startBtn = document.getElementById("start-game-btn");
    const clickBtn = document.getElementById("click-btn");
    const gameInfo = document.getElementById("game-info");
    const finalScoreEl = document.getElementById("final-score");
    const leaderboardEl = document.getElementById("leaderboard");
    const claimBtn = document.getElementById("claim-btn");
    const claimStatus = document.getElementById("claim-status");

    let clickCount = 0;
    const gameDuration = 54; // segundos
    let timer;
    let timeLeft;

    // Connect to MetaMask
    async function connectWallet() {
      if(typeof window.ethereum === "undefined") {
        alert("MetaMask n√£o encontrado! Instale a extens√£o e tente novamente.");
        return;
      }
      try {
        const accounts = await ethereum.request({ method: "eth_requestAccounts" });
        userAccount = accounts[0];
        walletAddressEl.textContent = "Carteira conectada: " + userAccount;
        connectWalletBtn.style.display = "none";
        startBtn.style.display = "inline-block";
        loadLeaderboard();
      } catch (err) {
        alert("Erro ao conectar carteira: " + err.message);
      }
    }

    // Save score localStorage
    function saveScore(address, score) {
      let scores = JSON.parse(localStorage.getItem("kakarot_click_scores") || "[]");
      scores.push({address, score, date: Date.now()});
      // Limpar pontua√ß√µes antigas (mais de 7 dias)
      scores = scores.filter(s => (Date.now() - s.date) < 7*24*60*60*1000);
      localStorage.setItem("kakarot_click_scores", JSON.stringify(scores));
    }

    // Load leaderboard
    function loadLeaderboard() {
      let scores = JSON.parse(localStorage.getItem("kakarot_click_scores") || "[]");
      // Filtrar os √∫ltimos 7 dias e ordenar
      scores = scores.filter(s => (Date.now() - s.date) < 7*24*60*60*1000);
      scores.sort((a,b) => b.score - a.score);
      scores = scores.slice(0,10);

      leaderboardEl.innerHTML = "";
      if(scores.length === 0) {
        leaderboardEl.innerHTML = "<li>Nenhum registro ainda.</li>";
        return;
      }
      scores.forEach(({address, score}, i) => {
        leaderboardEl.innerHTML += `<li><strong>${i+1}.</strong> ${address.slice(0,6)}...${address.slice(-4)} - ${score} cliques</li>`;
      });
    }

    // Start game
    function startGame() {
      if(!userAccount) {
        alert("Conecte sua carteira para jogar e registrar seus cliques!");
        return;
      }
      clickCount = 0;
      timeLeft = gameDuration;
      finalScoreEl.textContent = "";
      gameInfo.textContent = `Tempo restante: ${timeLeft}s`;
      startBtn.style.display = "none";
      clickBtn.style.display = "inline-block";
      claimBtn.style.display = "none";
      claimStatus.textContent = "";

      timer = setInterval(() => {
        timeLeft--;
        gameInfo.textContent = `Tempo restante: ${timeLeft}s`;
        if(timeLeft <= 0) {
          clearInterval(timer);
          endGame();
        }
      }, 1000);
    }

    // End game
    function endGame() {
      clickBtn.style.display = "none";
      startBtn.style.display = "inline-block";
      finalScoreEl.textContent = `Fim do jogo! Voc√™ clicou ${clickCount} vezes.`;

      // Salvar resultado na leaderboard local
      saveScore(userAccount, clickCount);
      loadLeaderboard();

      // Mostrar bot√£o claim para usu√°rios no top 10 local
      let scores = JSON.parse(localStorage.getItem("kakarot_click_scores") || "[]");
      scores = scores.filter(s => (Date.now() - s.date) < 7*24*60*60*1000);
      scores.sort((a,b) => b.score - a.score);
      const rank = scores.findIndex(s => s.address === userAccount && s.score === clickCount) + 1;

      if(rank > 0 && rank <= 10) {
        claimBtn.style.display = "inline-block";
        claimStatus.textContent = `Parab√©ns! Voc√™ est√° no top ${rank} semanal. Pode reivindicar seus tokens!`;
        claimStatus.style.color = "#00ff88";
      } else {
        claimBtn.style.display = "none";
        claimStatus.textContent = `Voc√™ n√£o est√° no top 10. Continue tentando!`;
        claimStatus.style.color = "#f44336";
      }
    }

    // Eventos
    connectWalletBtn.addEventListener("click", connectWallet);
    startBtn.addEventListener("click", startGame);
    clickBtn.addEventListener("click", () => {
      clickCount++;
    });

    // Exemplo b√°sico da fun√ß√£o claim, voc√™ deve adaptar para chamar seu contrato real
    claimBtn.addEventListener("click", async () => {
      claimBtn.disabled = true;
      claimStatus.textContent = "Processando reivindica√ß√£o...";
      try {
        // Aqui voc√™ faria a chamada para o smart contract para claim tokens
        // Exemplo:
        // await contract.methods.claimTokens().send({from: userAccount});
        // Simulando delay
        await new Promise(r => setTimeout(r, 2000));
        claimStatus.textContent = "Tokens reivindicados com sucesso! üí•";
      } catch (e) {
        claimStatus.textContent = "Erro ao reivindicar tokens: " + e.message;
      }
      claimBtn.disabled = false;
    });

  </script>
</body>
</html>
